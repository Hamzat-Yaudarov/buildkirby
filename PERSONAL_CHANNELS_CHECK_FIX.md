# –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø—Ä–æ–≤–µ—Ä–∫–∏ –ª–∏—á–Ω—ã—Ö —Å–ø–æ–Ω—Å–æ—Ä—Å–∫–∏—Ö –∫–∞–Ω–∞–ª–æ–≤

## –ü—Ä–æ–±–ª–µ–º–∞
–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å —Ö–æ—Ç–µ–ª, —á—Ç–æ–±—ã –±–æ—Ç –ø—Ä–æ–ø—É—Å–∫–∞–ª –ª–∏—á–Ω—ã–µ —Å–ø–æ–Ω—Å–æ—Ä—Å–∫–∏–µ –∫–∞–Ω–∞–ª—ã (–∫–æ—Ç–æ—Ä—ã–µ –æ–Ω –Ω–µ –º–æ–∂–µ—Ç –ø—Ä–æ–≤–µ—Ä–∏—Ç—å) —Ç–æ–ª—å–∫–æ –≤ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–Ω–æ–º –∫–æ–Ω—Ç–µ–∫—Å—Ç–µ - –∫–æ–≥–¥–∞ –ø–æ–∫–∞–∑—ã–≤–∞—é—Ç—Å—è –∏–º–µ–Ω–Ω–æ –ª–∏—á–Ω—ã–µ –∫–∞–Ω–∞–ª—ã, –∞ –ù–ï –∫–æ–≥–¥–∞ –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç—Å—è –æ–±—â–µ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ –æ–± –æ—Ç—Å—É—Ç—Å—Ç–≤–∏–∏ –∫–∞–Ω–∞–ª–æ–≤ SubGram.

## –î–≤–∞ —Ä–∞–∑–ª–∏—á–Ω—ã—Ö –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞

### 1. –û–±—â–∏–π –∫–æ–Ω—Ç–µ–∫—Å—Ç (–ù–ï –ø—Ä–æ–ø—É—Å–∫–∞—Ç—å –æ—à–∏–±–∫–∏)
**–ö–æ–≥–¥–∞:** –ü–æ–∫–∞–∑—ã–≤–∞–µ—Ç—Å—è —Å–æ–æ–±—â–µ–Ω–∏–µ –æ–± –æ—Ç—Å—É—Ç—Å—Ç–≤–∏–∏ SubGram –∫–∞–Ω–∞–ª–æ–≤
```
üîí –î–ª—è –¥–æ—Å—Ç—É–ø–∞ –∫ –±–æ—Ç—É –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ –ø–æ–¥–ø–∏—Å–∞—Ç—å—Å—è –Ω–∞ —Å–ø–æ–Ω—Å–æ—Ä—Å–∫–∏–µ –∫–∞–Ω–∞–ª—ã.
‚è≥ –í—Ä–µ–º–µ–Ω–Ω–æ –Ω–µ—Ç –¥–æ—Å—Ç—É–ø–Ω—ã—Ö –∫–∞–Ω–∞–ª–æ–≤ –¥–ª—è –ø–æ–¥–ø–∏—Å–∫–∏. –ü–æ–ø—Ä–æ–±—É–π—Ç–µ –ø–æ–∑–∂–µ –∏–ª–∏ –æ–±—Ä–∞—Ç–∏—Ç–µ—Å—å –∫ –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä—É.
üëá –ù–∞–∂–º–∏—Ç–µ –∫–Ω–æ–ø–∫—É –Ω–∏–∂–µ –¥–ª—è –ø–æ–≤—Ç–æ—Ä–Ω–æ–π –ø—Ä–æ–≤–µ—Ä–∫–∏.
[üîÑ –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ø–æ–¥–ø–∏—Å–∫–∏]
```
**–ü–æ–≤–µ–¥–µ–Ω–∏–µ:** –ï—Å–ª–∏ –ª–∏—á–Ω—ã–µ –∫–∞–Ω–∞–ª—ã –Ω–µ–¥–æ—Å—Ç—É–ø–Ω—ã –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ - –ø–æ–∫–∞–∑—ã–≤–∞—Ç—å –∫–∞–∫ –Ω–µ–ø–æ–¥–ø–∏—Å–∞–Ω–Ω—ã–µ

### 2. –ö–æ–Ω—Ç–µ–∫—Å—Ç –ª–∏—á–Ω—ã—Ö –∫–∞–Ω–∞–ª–æ–≤ (–ø—Ä–æ–ø—É—Å–∫–∞—Ç—å –æ—à–∏–±–∫–∏)  
**–ö–æ–≥–¥–∞:** –ü–æ–∫–∞–∑—ã–≤–∞—é—Ç—Å—è –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã–µ –ª–∏—á–Ω—ã–µ —Å–ø–æ–Ω—Å–æ—Ä—Å–∫–∏–µ –∫–∞–Ω–∞–ª—ã
```
üîê –î–ª—è –ø–æ–ª–Ω–æ–≥–æ –¥–æ—Å—Ç—É–ø–∞ –∫ –±–æ—Ç—É –ø–æ–¥–ø–∏—à–∏—Ç–µ—Å—å –Ω–∞ –Ω–∞—à–∏ –æ—Å–Ω–æ–≤–Ω—ã–µ –∫–∞–Ω–∞–ª—ã:

1. BorshPodarki
2. Starfyrobot
3. NFTStarski

‚ö†Ô∏è –ü–æ—Å–ª–µ –ø–æ–¥–ø–∏—Å–∫–∏ –Ω–∞–∂–º–∏—Ç–µ "–ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ø–æ–¥–ø–∏—Å–∫–∏"
[‚úÖ –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ø–æ–¥–ø–∏—Å–∫–∏]
```
**–ü–æ–≤–µ–¥–µ–Ω–∏–µ:** –ï—Å–ª–∏ –ª–∏—á–Ω—ã–µ –∫–∞–Ω–∞–ª—ã –Ω–µ–¥–æ—Å—Ç—É–ø–Ω—ã –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ - –ø—Ä–æ–ø—É—Å–∫–∞—Ç—å –∏ —Å—á–∏—Ç–∞—Ç—å –ø–æ–¥–ø–∏—Å–∞–Ω–Ω—ã–º–∏

## –†–µ—à–µ–Ω–∏–µ

### 1. –°–æ–∑–¥–∞–Ω–æ –¥–≤–µ —Ä–∞–∑–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏ –ø—Ä–æ–≤–µ—Ä–∫–∏

**`handleSubscriptionCheck()`** - –æ–±—ã—á–Ω–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞:
- –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –¥–ª—è –æ–±—â–µ–≥–æ —Å–æ–æ–±—â–µ–Ω–∏—è –æ–± –æ—Ç—Å—É—Ç—Å—Ç–≤–∏–∏ SubGram –∫–∞–Ω–∞–ª–æ–≤
- –í—ã–∑—ã–≤–∞–µ—Ç `checkPersonalChannelsSubscription(userId, false)` - –ù–ï –ø—Ä–æ–ø—É—Å–∫–∞–µ—Ç –æ—à–∏–±–∫–∏
- Callback: `'check_subscription'`

**`handleSubscriptionCheckPersonal()`** - –ø—Ä–æ–≤–µ—Ä–∫–∞ –ª–∏—á–Ω—ã—Ö –∫–∞–Ω–∞–ª–æ–≤:
- –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –∫–æ–≥–¥–∞ –ø–æ–∫–∞–∑—ã–≤–∞—é—Ç—Å—è –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã–µ –ª–∏—á–Ω—ã–µ –∫–∞–Ω–∞–ª—ã
- –í—ã–∑—ã–≤–∞–µ—Ç `checkPersonalChannelsSubscription(userId, true)` - –ø—Ä–æ–ø—É—Å–∫–∞–µ—Ç –æ—à–∏–±–∫–∏
- Callback: `'check_subscription_personal'`

### 2. –†–∞–∑–Ω—ã–µ callback_data –¥–ª—è –∫–Ω–æ–ø–æ–∫

**–û–±—ã—á–Ω–∞—è –∫–Ω–æ–ø–∫–∞** (–≤ –æ–±—â–µ–º —Å–æ–æ–±—â–µ–Ω–∏–∏):
```javascript
{ text: 'üîÑ –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ø–æ–¥–ø–∏—Å–∫–∏', callback_data: 'check_subscription' }
```

**–ö–Ω–æ–ø–∫–∞ –¥–ª—è –ª–∏—á–Ω—ã—Ö –∫–∞–Ω–∞–ª–æ–≤** (–≤ —Å–æ–æ–±—â–µ–Ω–∏–∏ —Å –ª–∏—á–Ω—ã–º–∏ –∫–∞–Ω–∞–ª–∞–º–∏):
```javascript
{ text: '‚úÖ –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ø–æ–¥–ø–∏—Å–∫–∏', callback_data: 'check_subscription_personal' }
```

### 3. –î–æ–±–∞–≤–ª–µ–Ω–∞ –ø–æ–¥–¥–µ—Ä–∂–∫–∞ –Ω–æ–≤–æ–≥–æ callback

- –î–æ–±–∞–≤–ª–µ–Ω `'check_subscription_personal'` –≤ `allowedWithoutSubscription`
- –î–æ–±–∞–≤–ª–µ–Ω –≤ `commandsThatAnswerThemselves`
- –°–æ–∑–¥–∞–Ω –Ω–æ–≤—ã–π case –≤ switch –¥–ª—è –æ–±—Ä–∞–±–æ—Ç–∫–∏

## –ò–∑–º–µ–Ω–µ–Ω–∏—è –≤ –∫–æ–¥–µ

### index.js

1. **–ò–∑–º–µ–Ω–µ–Ω–∞ –∫–Ω–æ–ø–∫–∞ –≤ –∫–æ–Ω—Ç–µ–∫—Å—Ç–µ –ª–∏—á–Ω—ã—Ö –∫–∞–Ω–∞–ª–æ–≤:**
```javascript
// –ë—ã–ª–æ:
callback_data: 'check_subscription'

// –°—Ç–∞–ª–æ:
callback_data: 'check_subscription_personal'
```

2. **–ò–∑–º–µ–Ω–µ–Ω –≤—ã–∑–æ–≤ –≤ –æ–±—ã—á–Ω–æ–º –∫–æ–Ω—Ç–µ–∫—Å—Ç–µ:**
```javascript
// –ë—ã–ª–æ:
checkPersonalChannelsSubscription(userId, true)

// –°—Ç–∞–ª–æ:
checkPersonalChannelsSubscription(userId, false)
```

3. **–î–æ–±–∞–≤–ª–µ–Ω–∞ –Ω–æ–≤–∞—è —Ñ—É–Ω–∫—Ü–∏—è `handleSubscriptionCheckPersonal()`**
- –ò–¥–µ–Ω—Ç–∏—á–Ω–∞ `handleSubscriptionCheck()` 
- –ù–æ –≤—Å–µ–≥–¥–∞ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç `checkPersonalChannelsSubscription(userId, true)`

## –†–µ–∑—É–ª—å—Ç–∞—Ç

‚úÖ **–í –æ–±—â–µ–º –∫–æ–Ω—Ç–µ–∫—Å—Ç–µ** (–æ—Ç—Å—É—Ç—Å—Ç–≤–∏–µ SubGram –∫–∞–Ω–∞–ª–æ–≤):
- –ö–Ω–æ–ø–∫–∞ "üîÑ –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ø–æ–¥–ø–∏—Å–∫–∏" ‚Üí `check_subscription`
- –ù–µ–¥–æ—Å—Ç—É–ø–Ω—ã–µ –ª–∏—á–Ω—ã–µ –∫–∞–Ω–∞–ª—ã —Å—á–∏—Ç–∞—é—Ç—Å—è –Ω–µ–ø–æ–¥–ø–∏—Å–∞–Ω–Ω—ã–º–∏
- –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å —É–≤–∏–¥–∏—Ç —Ç—Ä–µ–±–æ–≤–∞–Ω–∏–µ –ø–æ–¥–ø–∏—Å–∞—Ç—å—Å—è

‚úÖ **–í –∫–æ–Ω—Ç–µ–∫—Å—Ç–µ –ª–∏—á–Ω—ã—Ö –∫–∞–Ω–∞–ª–æ–≤**:
- –ö–Ω–æ–ø–∫–∞ "‚úÖ –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ø–æ–¥–ø–∏—Å–∫–∏" ‚Üí `check_subscription_personal`
- –ù–µ–¥–æ—Å—Ç—É–ø–Ω—ã–µ –ª–∏—á–Ω—ã–µ –∫–∞–Ω–∞–ª—ã –ø—Ä–æ–ø—É—Å–∫–∞—é—Ç—Å—è (—Å—á–∏—Ç–∞—é—Ç—Å—è –ø–æ–¥–ø–∏—Å–∞–Ω–Ω—ã–º–∏)
- –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –º–æ–∂–µ—Ç –ø—Ä–æ–π—Ç–∏ –¥–∞–ª—å—à–µ –¥–∞–∂–µ –µ—Å–ª–∏ –±–æ—Ç –Ω–µ –º–æ–∂–µ—Ç –ø—Ä–æ–≤–µ—Ä–∏—Ç—å –Ω–µ–∫–æ—Ç–æ—Ä—ã–µ –∫–∞–Ω–∞–ª—ã

## –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ

–§—É–Ω–∫—Ü–∏–∏ —Ä–∞–∑–ª–∏—á–∞—é—Ç—Å—è –≤ –ª–æ–≥–∞—Ö:
- `üîÑ –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø–æ–¥–ø–∏—Å–∫–∏ –ø–æ –∑–∞–ø—Ä–æ—Å—É –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è` - –æ–±—ã—á–Ω–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞
- `üîÑ –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø–æ–¥–ø–∏—Å–∫–∏ (–ª–∏—á–Ω—ã–µ –∫–∞–Ω–∞–ª—ã) –ø–æ –∑–∞–ø—Ä–æ—Å—É –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è` - –ø—Ä–æ–≤–µ—Ä–∫–∞ –ª–∏—á–Ω—ã—Ö –∫–∞–Ω–∞–ª–æ–≤

## –°–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å

–í—Å–µ —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–µ –∫–Ω–æ–ø–∫–∏ `check_subscription` –ø—Ä–æ–¥–æ–ª–∂–∞—é—Ç —Ä–∞–±–æ—Ç–∞—Ç—å –∫–∞–∫ —Ä–∞–Ω—å—à–µ (–ù–ï –ø—Ä–æ–ø—É—Å–∫–∞—é—Ç –æ—à–∏–±–∫–∏), –Ω–æ–≤–∞—è —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å –¥–æ–±–∞–≤–ª–µ–Ω–∞ —Ç–æ–ª—å–∫–æ –¥–ª—è –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞ –ª–∏—á–Ω—ã—Ö –∫–∞–Ω–∞–ª–æ–≤.
