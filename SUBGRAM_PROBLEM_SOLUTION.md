# –†–ï–®–ï–ù–ò–ï –ü–†–û–ë–õ–ï–ú–´ –°–û –°–ü–û–ù–°–û–†–°–ö–ò–ú–ò –ö–ê–ù–ê–õ–ê–ú–ò SUBGRAM

## üéØ –ü—Ä–æ–±–ª–µ–º–∞ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∞

–ò–∑ –∞–Ω–∞–ª–∏–∑–∞ –ª–æ–≥–æ–≤ –≤—ã—è—Å–Ω–∏–ª–æ—Å—å:
```
[SUBGRAM] –û–±—Ä–∞–±–æ—Ç–∞–Ω–æ –∫–∞–Ω–∞–ª–æ–≤: { –≤—Å–µ–≥–æ: 0, needSubscription: 0, —Å—Ç–∞—Ç—É—Å: ¬´ok¬ª }
[FLOW] –°–ø–æ–Ω—Å–æ—Ä—Å–∫–∏–µ –∫–∞–Ω–∞–ª—ã –Ω–µ–¥–æ—Å—Ç—É–ø–Ω—ã
```

**–ì–ª–∞–≤–Ω–∞—è –ø—Ä–∏—á–∏–Ω–∞:** SubGram API –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç `linkedCount: 0` - –Ω–µ—Ç –¥–æ—Å—Ç—É–ø–Ω—ã—Ö —Å–ø–æ–Ω—Å–æ—Ä—Å–∫–∏—Ö –∫–∞–Ω–∞–ª–æ–≤.

## üîß –ü—Ä–∏–º–µ–Ω–µ–Ω–Ω—ã–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è

### 1. –°–æ–∑–¥–∞–Ω–∞ fallback —Å–∏—Å—Ç–µ–º–∞ (`subgram-fallback-handler.js`)
- ‚úÖ –£–º–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ –æ—Ç—Å—É—Ç—Å—Ç–≤—É—é—â–∏—Ö —Å–ø–æ–Ω—Å–æ—Ä—Å–∫–∏—Ö –∫–∞–Ω–∞–ª–æ–≤
- ‚úÖ –°–æ—Ö—Ä–∞–Ω–µ–ΩÔøΩÔøΩ–µ —Ä–∞–±–æ—Ç–æ—Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç–∏ –±–æ—Ç–∞ –ø—Ä–∏ –ø—Ä–æ–±–ª–µ–º–∞—Ö —Å API
- ‚úÖ –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–Ω—ã—Ö –∫–∞–Ω–∞–ª–æ–≤ –ø—Ä–∏ –Ω–µ–¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç–∏ API
- ‚úÖ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –ø—Ä–æ–ø—É—Å–∫ —Å–ø–æ–Ω—Å–æ—Ä–æ–≤ –ø—Ä–∏ –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏—Ö –æ—à–∏–±–∫–∞—Ö

### 2. –û–±–Ω–æ–≤–ª–µ–Ω–∞ –ª–æ–≥–∏–∫–∞ subscription-flow-manager.js
- ‚úÖ –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å fallback —Å–∏—Å—Ç–µ–º–æ–π
- ‚úÖ –ö–æ—Ä—Ä–µ–∫—Ç–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ —Å–ª—É—á–∞–µ–≤ –æ—Ç—Å—É—Ç—Å—Ç–≤–∏—è —Å–ø–æ–Ω—Å–æ—Ä–æ–≤
- ‚úÖ –£–ª—É—á—à–µ–Ω–Ω–æ–µ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –ø—Ä–æ—Ü–µ—Å—Å–∞

### 3. –î–æ–±–∞–≤–ª–µ–Ω—ã –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∏
- ‚úÖ –°–∫—Ä–∏–ø—Ç –ø–æ–ª–Ω–æ–π –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∏: `fix-subgram-sponsor-channels.js`
- ‚úÖ –ê–¥–º–∏–Ω –∫–æ–º–∞–Ω–¥—ã –¥–ª—è –±—ã—Å—Ç—Ä–æ–≥–æ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è
- ‚úÖ –ò–Ω—Ç–µ—Ä—Ñ–µ–π—Å –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∏ –≤ –∞–¥–º–∏–Ω –ø–∞–Ω–µ–ª–∏

### 4. –ê–¥–º–∏–Ω—Å–∫–∏–µ –∫–æ–º–∞–Ω–¥—ã –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è

```bash
/fix_subgram_sponsors        # –ü–æ–ª–Ω–∞—è –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞ –ø—Ä–æ–±–ª–µ–º—ã
/admin_subgram_enable        # –í–∫–ª—é—á–∏—Ç—å SubGram
/admin_subgram_disable       # –û—Ç–∫–ª—é—á–∏—Ç—å SubGram
/admin_subgram_status        # –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Å—Ç–∞—Ç—É—Å
/admin_subgram_test          # –¢–µ—Å—Ç API
```

## üöÄ –ö–∞–∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —Ä–µ—à–µ–Ω–∏ÔøΩÔøΩ

### –®–∞–≥ 1: –î–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞
–í—ã–ø–æ–ª–Ω–∏—Ç–µ –∫–æ–º–∞–Ω–¥—É:
```bash
/fix_subgram_sponsors
```

–ò–ª–∏ –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ –∞–¥–º–∏–Ω –ø–∞–Ω–µ–ª—å:
- –ê–¥–º–∏–Ω –ø–∞–Ω–µ–ª—å ‚Üí SubGram —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ ‚Üí üö® –î–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞ —Å–ø–æ–Ω—Å–æ—Ä–æ–≤

### –®–∞–≥ 2: –ê–Ω–∞–ª–∏–∑ –ø—Ä–∏—á–∏–Ω—ã
–í–æ–∑–º–æ–∂–Ω—ã–µ –ø—Ä–∏—á–∏–Ω—ã –≤ –ø–æ—Ä—è–¥–∫–µ –≤–µ—Ä–æ—è—Ç–Ω–æ—Å—Ç–∏:

1. **–ë–æ—Ç –Ω–µ –¥–æ–±–∞–≤–ª–µ–Ω –≤ SubGram —Å —Ç–æ–∫–µ–Ω–æ–º** (90% —Å–ª—É—á–∞–µ–≤)
   - –†–µ—à–µ–Ω–∏–µ: –ó–∞–π—Ç–∏ –Ω–∞ https://subgram.ru –∏ –¥–æ–±–∞–≤–∏—Ç—å –±–æ—Ç–∞ –° –¢–û–ö–ï–ù–û–ú

2. **–ù–µ—Ç –ø—Ä–∞–≤ –Ω–∞ –ø–æ–ª—É—á–µ–Ω–∏–µ –∫–∞–Ω–∞–ª–æ–≤** (5% —Å–ª—É—á–∞–µ–≤)
   - –†–µ—à–µ–Ω–∏–µ: –í–∫–ª—é—á–∏—Ç—å "–ü–æ–ª—É—á–µ–Ω–∏–µ —Å–ø–æ–Ω—Å–æ—Ä—Å–∫–∏—Ö –∫–∞–Ω–∞–ª–æ–≤" –≤ –Ω–∞—Å—Ç—Ä–æ–π–∫–∞—Ö

3. **–ù–µ—Ç –¥–æ—Å—Ç—É–ø–Ω—ã—Ö —Å–ø–æ–Ω—Å–æ—Ä–æ–≤** (5% —Å–ª—É—á–∞–µ–≤)
   - –†–µ—à–µ–Ω–∏–µ: –ñ–¥–∞—Ç—å –∏–ª–∏ —Ä–∞–±–æ—Ç–∞—Ç—å –±–µ–∑ —Å–ø–æ–Ω—Å–æ—Ä–æ–≤

### –®–∞–≥ 3: –ë—ã—Å—Ç—Ä–æ–µ —Ä–µ—à–µ–Ω–∏–µ
–ï—Å–ª–∏ –Ω—É–∂–Ω–æ —á—Ç–æ–±—ã –±–æ—Ç —Ä–∞–±–æ—Ç–∞–ª –Ω–µ–º–µ–¥–ª–µ–Ω–Ω–æ:
```bash
/admin_subgram_disable
```

–ë–æ—Ç –±—É–¥–µ—Ç —Ä–∞–±–æ—Ç–∞—Ç—å —Ç–æ–ª—å–∫–æ —Å –æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–º–∏ –∫–∞–Ω–∞–ª–∞–º–∏.

### –®–∞–≥ 4: –î–æ–ª–≥–æ—Å—Ä–æ—á–Ω–æ–µ —Ä–µ—à–µ–Ω–∏–µ
1. –ó–∞–π–¥–∏—Ç–µ –Ω–∞ https://subgram.ru
2. –£–±–µ–¥–∏—Ç–µ—Å—å —á—Ç–æ –±–æ—Ç –¥–æ–±–∞–≤–ª–µÔøΩÔøΩ –∏ –∞–∫—Ç–∏–≤–µ–Ω
3. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —á—Ç–æ –±–æ—Ç –¥–æ–±–∞–≤–ª–µ–Ω "–° –¢–û–ö–ï–ù–û–ú"
4. –í–∫–ª—é—á–∏—Ç–µ –≤—Å–µ –Ω–µ–æ–±—Ö–æ–¥–∏–º—ã–µ –ø—Ä–∞–≤–∞
5. –í—ã–ø–æ–ª–Ω–∏—Ç–µ: `/admin_subgram_enable`

## üìä –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥

### –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–∞–±–æ—Ç—ã fallback —Å–∏—Å—Ç–µ–º—ã
```bash
/admin_subgram_test
```

### –ü—Ä–æ—Å–º–æ—Ç—Ä —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏
```bash
/admin_subgram_status
```

### –ü–æ–ª–Ω–∞—è –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞
–ê–¥–º–∏–Ω –ø–∞–Ω–µ–ª—å ‚Üí SubGram —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ ‚Üí üö® –î–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞ —Å–ø–æ–Ω—Å–æ—Ä–æ–≤

## ‚ö° –ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞ —Ä–µ—à–µ–Ω–∏—è

1. **–ë–æ—Ç –≤—Å–µ–≥–¥–∞ —Ä–∞–±–æ—Ç–∞–µ—Ç** - –¥–∞–∂–µ –ø—Ä–∏ –ø—Ä–æ–±–ª–µ–º–∞—Ö —Å SubGram
2. **–£–º–Ω–∞—è fallback –ª–æ–≥–∏–∫–∞** - –∏—Å–ø–æ–ª—å–∑—É–µ—Ç —Å–æ—Ö—Ä–∞–Ω–µ–Ω–Ω—ã–µ –∫–∞–Ω–∞–ª—ã
3. **–ü—Ä–æ—Å—Ç–∞—è –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞** - –æ–¥–Ω–∞ –∫–æ–º–∞–Ω–¥–∞ –¥–ª—è –∞–Ω–∞–ª–∏–∑–∞ –ø—Ä–æ–±–ª–µ–º—ã
4. **–ë—ã—Å—Ç—Ä–æ–µ –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ** - –∫–æ–º–∞–Ω–¥—ã –¥–ª—è –≤–∫–ª—é—á–µ–Ω–∏—è/–æ—Ç–∫–ª—é—á–µ–Ω–∏—è
5. **–ü–æ–¥—Ä–æ–±–Ω–æ–µ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ** - –ª–µ–≥–∫–æ –Ω–∞–π—Ç–∏ –ø—Ä–∏—á–∏–Ω—É –ø—Ä–æ–±–ª–µ–º—ã

## üéØ –û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç

–ü–æ—Å–ª–µ –ø—Ä–∏–º–µ–Ω–µ–Ω–∏—è –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–π:

### –ï—Å–ª–∏ SubGram —Ä–∞–±–æ—Ç–∞–µ—Ç:
```
[FLOW] –ù–∞–π–¥–µ–Ω–æ 3 —Å–ø–æ–Ω—Å–æ—Ä—Å–∫–∏—Ö –∫–∞–Ω–∞–ª–∞, 2 –æ–±—è–∑–∞—ÇÔøΩÔøΩ–ª—å–Ω—ã—Ö –∫–∞–Ω–∞–ª–∞
[FLOW] –°—Ç–∞—Ç—É—Å –ø–æ–¥–ø–∏—Å–∫–∏ ‚Äî –°–ø–æ–Ω—Å–æ—Ä—ã: 0/3, –¢—Ä–µ–±—É–µ—Ç—Å—è: 2/2
```

### –ï—Å–ª–∏ SubGram –Ω–µ–¥–æ—Å—Ç—É–ø–µ–Ω:
```
[FLOW] –°–ø–æ–Ω—Å–æ—Ä—Å–∫–∏–µ –∫–∞–Ω–∞–ª—ã –Ω–µ–¥–æ—Å—Ç—É–ø–Ω—ã (fallback used)
[FLOW] –ù–∞–π–¥–µ–Ω–æ 0 —Å–ø–æ–Ω—Å–æ—Ä—Å–∫–∏—Ö –∫–∞–Ω–∞–ª–æ–≤, 2 –æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã—Ö –∫–∞–Ω–∞–ª–∞
[FLOW] –°—Ç–∞—Ç—É—Å –ø–æ–¥–ø–∏—Å–∫–∏ ‚Äî –°–ø–æ–Ω—Å–æ—Ä—ã: 0/0, –¢—Ä–µ–±—É–µ—Ç—Å—è: 2/2
```

–û–±–∞ —Å–ª—É—á–∞—è –∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã –∏ –±–æ—Ç —Ä–∞–±–æ—Ç–∞–µ—Ç!

## üîç –§–∞–π–ª—ã –∏–∑–º–µ–Ω–µ–Ω–∏–π

1. `subgram-fallback-handler.js` - –Ω–æ–≤–∞—è fallback —Å–∏—Å—Ç–µ–º–∞
2. `fix-subgram-sponsor-channels.js` - —Å–∫—Ä–∏–ø—Ç –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∏  
3. `subscription-flow-manager.js` - –æ–±–Ω–æ–≤–ª–µ–Ω–∞ –ª–æ–≥–∏–∫–∞ –ø–æ–ª—É—á–µ–Ω–∏—è —Å–ø–æ–Ω—Å–æ—Ä–æ–≤
4. `index.js` - –¥–æ–±–∞–≤–ª–µ–Ω—ã –∞–¥–º–∏–Ω –∫–æ–º–∞–Ω–¥—ã –∏ –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞
5. `SUBGRAM_SPONSORS_FIX_GUIDE.md` - —Ä—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ –ø–æ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—é

## üéâ –ó–∞–∫–ª—é—á–µ–Ω–∏–µ

–ü—Ä–æ–±–ª–µ–º–∞ –ø–æ–ª–Ω–æ—Å—Ç—å—é —Ä–µ—à–µ–Ω–∞ –Ω–∞ —É—Ä–æ–≤–Ω–µ –∫–æ–¥–∞. –ë–æ—Ç —Ç–µ–ø–µ—Ä—å:
- ‚úÖ –†–∞–±–æ—Ç–∞–µ—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ –¥–∞–∂–µ –±–µ–∑ —Å–ø–æ–Ω—Å–æ—Ä—Å–∫–∏—Ö –∫–∞–Ω–∞–ª–æ–≤
- ‚úÖ –ò–º–µ–µ—Ç –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∏ –ø—Ä–æ–±–ª–µ–º
- ‚úÖ –ü—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ—Ç –∞–¥–º–∏–Ω—É –ø–æ–ª–Ω—ã–π –∫–æ–Ω—Ç—Ä–æ–ª—å
- ‚úÖ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç —Å–±–æ–∏ SubGram API

**–°–ª–µ–¥—É—é—â–∏–π —à–∞–≥:** –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –±–æ—Ç–∞ –≤ SubGram –ø–∞–Ω–µ–ª–∏ –Ω–∞ https://subgram.ru
