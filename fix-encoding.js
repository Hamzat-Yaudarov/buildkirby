const fs = require('fs');

// Define encoding fixes as patterns
const encodingFixes = [
    // Common Russian letter fixes
    ['ï¿½ï¿½Ð´Ð¼Ð¸ï¿½ï¿½Ð¸ÑÑ‚Ñ€Ð°Ñ†Ð¸Ð¸', 'Ð°Ð´Ð¼Ð¸Ð½Ð¸ÑÑ‚Ñ€Ð°Ñ†Ð¸Ð¸'],
    ['Ðžï¿½ï¿½Ð¸Ð±ÐºÐ°', 'ÐžÑˆÐ¸Ð±ÐºÐ°'],
    ['ÐžÑˆÐ¸Ð±ï¿½ï¿½Ð°', 'ÐžÑˆÐ¸Ð±ÐºÐ°'],  
    ['ÐžÑˆÐ¸Ð±ÐºÐ°', 'ÐžÑˆÐ¸Ð±ÐºÐ°'],
    ['ï¿½ï¿½Ð»Ð°Ð²Ð½Ð¾Ðµ', 'Ð³Ð»Ð°Ð²Ð½Ð¾Ðµ'],
    ['Ð“Ð»Ð°Ð²ï¿½ï¿½Ð½Ð¾Ðµ', 'Ð“Ð»Ð°Ð²Ð½Ð¾Ðµ'],
    ['Ð“Ð»Ð°Ð²Ð½ï¿½ï¿½Ðµ', 'Ð“Ð»Ð°Ð²Ð½Ð¾Ðµ'],
    ['Ð“Ð»Ð°ï¿½ï¿½Ð½Ð¾Ðµ', 'Ð“Ð»Ð°Ð²Ð½Ð¾Ðµ'],
    ['ÐŸÐ¾Ð»ÑŒï¿½ï¿½Ð·Ð¾Ð²Ð°Ñ‚ÐµÐ»ÑŒ', 'ÐŸÐ¾Ð»ÑŒÐ·Ð¾Ð²Ð°Ñ‚ÐµÐ»ÑŒ'],
    ['Ð¿Ð¾Ð»ÑŒÐ·ï¿½ï¿½Ð·Ð¾Ð²Ð°Ñ‚ÐµÐ»Ñ', 'Ð¿Ð¾Ð»ÑŒÐ·Ð¾Ð²Ð°Ñ‚ÐµÐ»Ñ'],
    ['Ð¿Ð¾Ð»ÑŒÐ·ï¿½ï¿½Ð²Ð°Ñ‚ÐµÐ»Ñ', 'Ð¿Ð¾Ð»ÑŒÐ·Ð¾Ð²Ð°Ñ‚ÐµÐ»Ñ'],
    ['Ð¿Ð¾ï¿½ï¿½ÑŒÐ·Ð¾Ð²Ð°Ñ‚ÐµÐ»ÐµÐ¹', 'Ð¿Ð¾Ð»ÑŒÐ·Ð¾Ð²Ð°Ñ‚ÐµÐ»ÐµÐ¹'],
    ['ÐŸï¿½ï¿½Ð¿Ñ€ï¿½ï¿½Ð±Ñƒï¿½ï¿½Ñ‚Ðµ', 'ÐŸÐ¾Ð¿Ñ€Ð¾Ð±ÑƒÐ¹Ñ‚Ðµ'],
    ['ÐºÐ°Ð½ï¿½ï¿½Ð»Ð¾Ð²', 'ÐºÐ°Ð½Ð°Ð»Ð¾Ð²'],
    ['Ð¡Ð¾Ð¾Ð±Ñ‰ÐµÐ½ï¿½ï¿½ï¿½Ðµ', 'Ð¡Ð¾Ð¾Ð±Ñ‰ÐµÐ½Ð¸Ðµ'],
    ['ÐŸÑ€Ð¸Ð³Ð»Ð°ÑÐ¸Ñ‚ï¿½ï¿½', 'ÐŸÑ€Ð¸Ð³Ð»Ð°ÑÐ¸Ñ‚ÑŒ'],
    ['Ðžï¿½ï¿½Ð¿Ñ€Ð°Ð²Ð»ÐµÐ½Ð¾', 'ÐžÑ‚Ð¿Ñ€Ð°Ð²Ð»ÐµÐ½Ð¾'],
    ['Ð¾Ñ‚Ð¿ï¿½ï¿½Ð°Ð²Ð»ÐµÐ½Ð¾', 'Ð¾Ñ‚Ð¿Ñ€Ð°Ð²Ð»ÐµÐ½Ð¾'],
    ['Ð·Ð°Ð²ÐµÑ€ï¿½ï¿½ÑˆÐµÐ½Ð°', 'Ð·Ð°Ð²ÐµÑ€ÑˆÐµÐ½Ð°'],
    ['Ð·Ð°Ð²Ðµï¿½ï¿½ÑˆÐµÐ½Ð°', 'Ð·Ð°Ð²ÐµÑ€ÑˆÐµÐ½Ð°'],
    ['Ð¿Ñ€ï¿½ï¿½Ð²ÐµÑ€ÐºÐ¸', 'Ð¿Ñ€Ð¾Ð²ÐµÑ€ÐºÐ¸'],
    ['ÐŸÑ€Ð¾ï¿½ï¿½Ðµï¿½ï¿½Ð¸Ñ‚ÑŒ', 'ÐŸÑ€Ð¾Ð²ÐµÑ€Ð¸Ñ‚ÑŒ'],
    ['Ð·Ð°Ð³Ñ€Ñƒï¿½ï¿½ÐºÐ¸', 'Ð·Ð°Ð³Ñ€ÑƒÐ·ÐºÐ¸'],
    ['ï¿½ï¿½Ð°Ð³Ñ€ÑƒÐ·ÐºÐ¸', 'Ð·Ð°Ð³Ñ€ÑƒÐ·ÐºÐ¸'],
    ['ÐÐ°ï¿½ï¿½Ð°Ð´', 'ÐÐ°Ð·Ð°Ð´'],
    ['ÐÐ°Ð·ï¿½ï¿½Ð´', 'ÐÐ°Ð·Ð°Ð´'],
    ['Ð¾Ñ‡Ð¸ÑÑ‚ï¿½ï¿½Ñ‚ÑŒ', 'Ð¾Ñ‡Ð¸ÑÑ‚Ð¸Ñ‚ÑŒ'],
    ['ÑƒÐ¿Ñ€ï¿½ï¿½Ð²Ð»ÐµÐ½Ð¸Ðµ', 'ÑƒÐ¿Ñ€Ð°Ð²Ð»ÐµÐ½Ð¸Ðµ'],
    ['ÑƒÐ¿Ñ€Ð°Ð²Ð»Ðµï¿½ï¿½Ð¸Ðµ', 'ÑƒÐ¿Ñ€Ð°Ð²Ð»ÐµÐ½Ð¸Ðµ'],
    ['Ð½Ð°ÑÑ‚Ñ€Ð¾Ðµï¿½ï¿½', 'Ð½Ð°ÑÑ‚Ñ€Ð¾ÐµÐº'],
    ['ÑÑ‚Ð°Ñ‚ï¿½ï¿½ÑÑ‚Ð¸ÐºÐ¸', 'ÑÑ‚Ð°Ñ‚Ð¸ÑÑ‚Ð¸ÐºÐ¸'],
    ['ÑÑ‚Ð°ï¿½ï¿½ï¿½ï¿½ï¿½Ð¸ÑÑ‚Ð¸ÐºÐ¸', 'ÑÑ‚Ð°Ñ‚Ð¸ÑÑ‚Ð¸ÐºÐ¸'],
    ['Ð»ï¿½ï¿½Ð³Ð¸', 'Ð»Ð¾Ð³Ð¸'],
    ['Ð›ï¿½ï¿½Ð³Ð¸', 'Ð›Ð¾Ð³Ð¸'],
    ['Ð»Ð¾Ð³ï¿½ï¿½', 'Ð»Ð¾Ð³Ð¸'],
    ['Ð›Ð¾Ð³ï¿½ï¿½', 'Ð›Ð¾Ð³Ð¸'],
    ['ÐžÐ±Ð½Ð¾Ð²Ð¸ï¿½ï¿½ÑŒ', 'ÐžÐ±Ð½Ð¾Ð²Ð¸Ñ‚ÑŒ'],
    ['ÐŸï¿½ï¿½Ð¿Ð¾Ð¿Ñ€Ð¾Ð±Ð¾Ð²Ð°Ñ‚ÑŒ', 'ÐŸÐ¾Ð¿Ñ€Ð¾Ð±Ð¾Ð²Ð°Ñ‚ÑŒ'],
    ['ÐŸÐ¾Ð¿ï¿½ï¿½Ð¾Ð±ï¿½ï¿½Ð²Ð°Ñ‚ÑŒ', 'ÐŸÐ¾Ð¿Ñ€Ð¾Ð±Ð¾Ð²Ð°Ñ‚ÑŒ'],
    ['ï¿½ï¿½Ð¾Ð¿ï¿½ï¿½Ð¾Ð±Ð¾Ð²Ð°Ñ‚ÑŒ', 'ÐŸÐ¾Ð¿Ñ€Ð¾Ð±Ð¾Ð²Ð°Ñ‚ÑŒ'],
    ['Ð²Ñ‹Ð±Ð¾Ñ€ï¿½ï¿½ï¿½', 'Ð²Ñ‹Ð±Ð¾Ñ€Ð°'],
    ['Ð¿Ð¾Ð»ÑƒÑ‡Ðµï¿½ï¿½Ð¸Ñ', 'Ð¿Ð¾Ð»ÑƒÑ‡ÐµÐ½Ð¸Ñ'],
    ['ï¿½ï¿½ï¿½ï¿½Ð½Ð°Ð»Ð¾Ð²', 'ÐºÐ°Ð½Ð°Ð»Ð¾Ð²'],
    ['ï¿½ï¿½Ð»Ð°Ð²Ð½Ð¾Ðµ', 'Ð³Ð»Ð°Ð²Ð½Ð¾Ðµ'],
    ['ï¿½ï¿½ï¿½Ð°Ñ€ÑƒÐ·ÐºÐ¸', 'Ð·Ð°Ð³Ñ€ÑƒÐ·ÐºÐ¸'],
    ['ï¿½ï¿½Ð°Ð³Ñ€ÑƒÐ·ÐºÐ°', 'Ð·Ð°Ð³Ñ€ÑƒÐ·ÐºÐ°'],
    ['Ð´ï¿½ï¿½Ð½Ð½Ñ‹Ñ…', 'Ð´Ð°Ð½Ð½Ñ‹Ñ…'],
    ['Ð´Ð°Ð½Ð½ï¿½ï¿½Ñ…', 'Ð´Ð°Ð½Ð½Ñ‹Ñ…'],
    ['Ð¿Ñ€Ð¾ï¿½ï¿½ÐµÑ€Ð¾Ðº', 'Ð¿Ñ€Ð¾Ð²ÐµÑ€Ð¾Ðº'],
    ['Ð¿Ñ€Ð¾Ð²ï¿½ï¿½ï¿½ï¿½Ð¾Ðº', 'Ð¿Ñ€Ð¾Ð²ÐµÑ€Ð¾Ðº'],
    ['Ð¸ÑÑ‚ï¿½ï¿½Ñ€Ð¸Ð¸', 'Ð¸ÑÑ‚Ð¾Ñ€Ð¸Ð¸'],
    ['ÑƒÐ½Ð¸ï¿½ï¿½Ð°Ð»ÑŒÐ½Ñ‹Ñ…', 'ÑƒÐ½Ð¸ÐºÐ°Ð»ÑŒÐ½Ñ‹Ñ…'],
    ['Ñƒï¿½ï¿½Ð¸ÐºÐ°Ð»ÑŒÐ½Ñ‹Ðµ', 'ÑƒÐ½Ð¸ÐºÐ°Ð»ÑŒÐ½Ñ‹Ðµ'],
    ['ÐºÐ°Ð½ï¿½ï¿½Ð»Ð¾Ð²', 'ÐºÐ°Ð½Ð°Ð»Ð¾Ð²'],
    ['ÐºÐ°Ð½Ð°Ð»Ð¾ï¿½ï¿½', 'ÐºÐ°Ð½Ð°Ð»Ð¾Ð²'],
    ['ÐÐµï¿½ï¿½Ð¸Ð·Ð²ÐµÑÑ‚Ð½Ñ‹Ð¹', 'ÐÐµÐ¸Ð·Ð²ÐµÑÑ‚Ð½Ñ‹Ð¹'],
    ['ÐÐµÐ¸Ð·Ð²Ðµï¿½ï¿½Ñ‚Ð½Ñ‹Ð¹', 'ÐÐµÐ¸Ð·Ð²ÐµÑÑ‚Ð½Ñ‹Ð¹'],
    ['Ð£Ð¿ï¿½ï¿½Ð°Ð²Ð»Ðµï¿½ï¿½Ð¸ï¿½ï¿½', 'Ð£Ð¿Ñ€Ð°Ð²Ð»ÐµÐ½Ð¸Ðµ'],
    ['Ð¡Ñ‚ï¿½ï¿½Ñ‚Ð¸ÑÑ‚Ð¸ÐºÐ°', 'Ð¡Ñ‚Ð°Ñ‚Ð¸ÑÑ‚Ð¸ÐºÐ°'],
    ['Ð¿Ð¾Ð´Ð¿Ð¸Ñï¿½ï¿½ï¿½ï¿½', 'Ð¿Ð¾Ð´Ð¿Ð¸ÑÐ¾Ðº'],
    ['Ð£Ð½ï¿½ï¿½ÐºÐ°Ð»ÑŒÐ½Ñ‹Ñ…', 'Ð£Ð½Ð¸ÐºÐ°Ð»ÑŒÐ½Ñ‹Ñ…'],
    ['Ð¿Ð¾Ð»ÑŒÐ·Ð¾ï¿½ï¿½Ð°Ñ‚ÐµÐ»ÐµÐ¹', 'Ð¿Ð¾Ð»ÑŒÐ·Ð¾Ð²Ð°Ñ‚ÐµÐ»ÐµÐ¹'],
    ['ï¿½ï¿½Ñ€Ð¾ÑˆÐ»Ð¾', 'Ð¿Ñ€Ð¾ÑˆÐ»Ð¾'],
    ['ÑÑ‡ï¿½ï¿½Ñ‚Ð°ÐµÑ‚ÑÑ', 'ÑÑ‡Ð¸Ñ‚Ð°ÐµÑ‚ÑÑ'],
    ['ï¿½ï¿½Ñ€Ð¾Ð²ÐµÑ€ÐºÐ°', 'Ð¿Ñ€Ð¾Ð²ÐµÑ€ÐºÐ°'],
    ['ÐŸÐ¾ÑÐ»ÐµÐ´Ð½ï¿½ï¿½Ñ', 'ÐŸÐ¾ÑÐ»ÐµÐ´Ð½ÑÑ'],
    ['ÐŸÐ¾Ñï¿½ï¿½ÐµÐ´Ð½Ð¸Ðµ', 'ÐŸÐ¾ÑÐ»ÐµÐ´Ð½Ð¸Ðµ'],
    ['Ð¿ï¿½ï¿½Ð»ÑŒÐ·Ð¾Ð²Ð°Ñ‚ÐµÐ»Ðµ', 'Ð¿Ð¾Ð»ÑŒÐ·Ð¾Ð²Ð°Ñ‚ÐµÐ»Ðµ'],
    ['Ð¿Ð¾ï¿½ï¿½ÑŒÐ·Ð¾Ð²Ð°Ñ‚ÐµÐ»ÑÑ…', 'Ð¿Ð¾Ð»ÑŒÐ·Ð¾Ð²Ð°Ñ‚ÐµÐ»ÑÑ…'],
    ['Ðš ÑÑ‚Ð°Ñ‚Ð¸Ñï¿½ï¿½Ð¸ÐºÐµ', 'Ðš ÑÑ‚Ð°Ñ‚Ð¸ÑÑ‚Ð¸ÐºÐµ'],
    ['Ð¾Ð±Ñ€Ð°Ð±Ð¾ï¿½ï¿½ÐºÐ¸', 'Ð¾Ð±Ñ€Ð°Ð±Ð¾Ñ‚ÐºÐ¸'],
    ['Ñ‚Ñ€ÐµÐ±ÑƒÐµÑ‚ Ñ€ÑƒÑ‡ï¿½ï¿½Ð¾Ð¹', 'Ñ‚Ñ€ÐµÐ±ÑƒÐµÑ‚ Ñ€ÑƒÑ‡Ð½Ð¾Ð¹'],
    ['Ðï¿½ï¿½Ñ‚Ð¾Ð¼Ð°Ñ‚Ð¸Ñ‡ÐµÑÐºÐ¸', 'ÐÐ²Ñ‚Ð¾Ð¼Ð°Ñ‚Ð¸Ñ‡ÐµÑÐºÐ¸'],
    ['Ð°ï¿½ï¿½Ñ‚Ð¾Ð¼Ð°Ñ‚Ð¸Ñ‡ÐµÑÐºÐ¸', 'Ð°Ð²Ñ‚Ð¾Ð¼Ð°Ñ‚Ð¸Ñ‡ÐµÑÐºÐ¸'],
    ['Ð¾Ð±Ñ€Ð°ï¿½ï¿½Ð¾Ñ‚ÐºÐ¸', 'Ð¾Ð±Ñ€Ð°Ð±Ð¾Ñ‚ÐºÐ¸'],
    ['ÐžÐ±Ñ€Ð°Ð±Ð¾Ñ‚Ð°ï¿½ï¿½Ð¾', 'ÐžÐ±Ñ€Ð°Ð±Ð¾Ñ‚Ð°Ð½Ð¾'],
    ['Ñ€ï¿½ï¿½Ñ‡Ð½Ð¾Ð¹', 'Ñ€ÑƒÑ‡Ð½Ð¾Ð¹'],
    ['Ð¾ï¿½ï¿½Ñ€Ð°Ð±Ð¾Ñ‚ÐºÐ¸', 'Ð¾Ð±Ñ€Ð°Ð±Ð¾Ñ‚ÐºÐ¸'],
    ['ÑÑƒÐ¼Ð¼ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½', 'ÑÑƒÐ¼Ð¼Ñ‹'],
    ['Ð¿Ð¾Ð´Ð¿Ð¸Ñï¿½ï¿½Ð¸', 'Ð¿Ð¾Ð´Ð¿Ð¸ÑÐºÐ¸'],
    ['ÑƒÐ²ÐµÐ´Ð¾Ð¼Ð»ÐµÐ½ï¿½ï¿½ÑÑ…', 'ÑƒÐ²ÐµÐ´Ð¾Ð¼Ð»ÐµÐ½Ð¸ÑÑ…'],
    ['Ð°Ð³ï¿½ï¿½Ð½Ñ‚Ð°', 'Ð°Ð³ÐµÐ½Ñ‚Ð°'],
    ['Ð»Ð¸Ð¼ï¿½ï¿½Ñ‚Ð¾Ð²', 'Ð»Ð¸Ð¼Ð¸Ñ‚Ð¾Ð²'],
    ['Ð»Ð¸Ð¼Ð¸Ñ‚ï¿½ï¿½Ð²', 'Ð»Ð¸Ð¼Ð¸Ñ‚Ð¾Ð²'],
    ['Ð»Ð¸Ð¼Ð¸ï¿½ï¿½Ñ‹', 'Ð»Ð¸Ð¼Ð¸Ñ‚Ñ‹'],
    ['Ð´Ð¾Ð»ï¿½ï¿½ÐµÐ½', 'Ð´Ð¾Ð»Ð¶ÐµÐ½'],
    ['Ð»Ð¸ï¿½ï¿½Ð¸Ñ‚Ñ‹', 'Ð»Ð¸Ð¼Ð¸Ñ‚Ñ‹'],
    ['Ð ÐµÐºÐ¾Ð¼ÐµÐ½Ð´Ð°ï¿½ï¿½Ð¸Ð¸', 'Ð ÐµÐºÐ¾Ð¼ÐµÐ½Ð´Ð°Ñ†Ð¸Ð¸'],
    ['Ð¿Ñ€ï¿½ï¿½Ð¼Ðµï¿½ï¿½ÐµÐ½Ð¸Ñ', 'Ð¿Ñ€Ð¸Ð¼ÐµÐ½ÐµÐ½Ð¸Ñ'],
    ['ÐºÐ°Ð½Ð°Ð»Ð°ï¿½ï¿½Ð¸', 'ÐºÐ°Ð½Ð°Ð»Ð°Ð¼Ð¸'],
    ['Ð¿Ñ€Ð°ï¿½ï¿½Ð²', 'Ð¿Ñ€Ð°Ð²'],
    ['Ð¿Ñ€ï¿½ï¿½Ð²', 'Ð¿Ñ€Ð°Ð²'],
    ['Ð½ï¿½ï¿½Ñ‚', 'Ð½ÐµÑ‚'],
    ['Ð½ÐµÐ´ÐµÐ»ÑŒï¿½ï¿½Ñ‹Ñ…', 'Ð½ÐµÐ´ÐµÐ»ÑŒÐ½Ñ‹Ñ…'],
    ['ÑÐ±Ñ€Ð¾ï¿½ï¿½ÐµÐ½Ñ‹', 'ÑÐ±Ñ€Ð¾ÑˆÐµÐ½Ñ‹'],
    ['Ð½ÐµÐ´ÐµÐ»ï¿½ï¿½Ð½Ñ‹Ñ…', 'Ð½ÐµÐ´ÐµÐ»ÑŒÐ½Ñ‹Ñ…'],
    ['Ð½ÐµÐ´ï¿½ï¿½Ð»ÑŒÐ½Ñ‹Ñ…', 'Ð½ÐµÐ´ÐµÐ»ÑŒÐ½Ñ‹Ñ…'],
    ['Ñ€Ð°ÑÐ¿Ñ€ÐµÐ´ÐµÐ»Ðµï¿½ï¿½Ð¸Ðµ', 'Ñ€Ð°ÑÐ¿Ñ€ÐµÐ´ÐµÐ»ÐµÐ½Ð¸Ðµ'],
    ['Ð´ï¿½ï¿½Ñ', 'Ð´Ð»Ñ'],
    ['Ð¾Ñ‚Ðºï¿½ï¿½ÑŽÑ‡ÐµÐ½Ð°', 'Ð¾Ñ‚ÐºÐ»ÑŽÑ‡ÐµÐ½Ð°'],
    ['Ð¾Ñ‚Ðºï¿½ï¿½ÑŽÑ‡ÐµÐ½', 'Ð¾Ñ‚ÐºÐ»ÑŽÑ‡ÐµÐ½'],
    ['Ð¾Ð±Ñ€Ð°ï¿½ï¿½Ð¾Ñ‚ÐºÐ°', 'Ð¾Ð±Ñ€Ð°Ð±Ð¾Ñ‚ÐºÐ°'],
    ['Ð—Ð°Ð´Ð°Ð½Ð¸ï¿½ï¿½', 'Ð—Ð°Ð´Ð°Ð½Ð¸Ðµ'],
    ['Ð´Ð¾Ð±Ð°Ð²Ð»ï¿½ï¿½Ð½Ð¾', 'Ð´Ð¾Ð±Ð°Ð²Ð»ÐµÐ½Ð¾'],
    ['Ð¾Ñ‚Ð¿Ñ€Ð°ï¿½ï¿½Ð»ÐµÐ½Ñ‹', 'Ð¾Ñ‚Ð¿Ñ€Ð°Ð²Ð»ÐµÐ½Ñ‹'],
    ['Ð¿Ð¾Ð»ï¿½ï¿½Ð·Ð¾Ð²Ð°Ñ‚ÐµÐ»ÑŽ', 'Ð¿Ð¾Ð»ÑŒÐ·Ð¾Ð²Ð°Ñ‚ÐµÐ»ÑŽ'],
    ['Ð·Ð°Ñï¿½ï¿½Ð¾Ðº', 'Ð·Ð°ÑÐ²Ð¾Ðº'],
    ['Ð¸Ð½Ñ„Ð¾Ñ€Ð¼Ð°ï¿½ï¿½ï¿½Ð¸ÑŽ', 'Ð¸Ð½Ñ„Ð¾Ñ€Ð¼Ð°Ñ†Ð¸ÑŽ'],
    ['Ð¿ï¿½ï¿½Ð»ÑŒÐ·Ð¾Ð²Ð°Ñ‚ÐµÐ»Ðµ', 'Ð¿Ð¾Ð»ÑŒÐ·Ð¾Ð²Ð°Ñ‚ÐµÐ»Ðµ'],
    ['Ð°Ð²Ñ‚ï¿½ï¿½Ð¼Ð°Ñ‚ï¿½ï¿½Ñ‡ÐµÑÐºÐ¸', 'Ð°Ð²Ñ‚Ð¾Ð¼Ð°Ñ‚Ð¸Ñ‡ÐµÑÐºÐ¸'],
    ['Ð¾ï¿½ï¿½Ñ€Ð°Ð±Ð°Ñ‚Ñ‹Ð²Ð°Ñ‚ÑŒ', 'Ð¾Ð±Ñ€Ð°Ð±Ð°Ñ‚Ñ‹Ð²Ð°Ñ‚ÑŒ'],
    ['ï¿½ï¿½Ð¾', 'Ð´Ð¾'],
    ['ï¿½ï¿½ï¿½ï¿½Ñ‡Ð½Ð°Ñ', 'Ñ€ÑƒÑ‡Ð½Ð°Ñ'],
    ['Ð¿Ð°Ñƒï¿½ï¿½Ð°', 'Ð¿Ð°ÑƒÐ·Ð°'],
    ['Ð¼Ðµï¿½ï¿½Ð´Ñƒ', 'Ð¼ÐµÐ¶Ð´Ñƒ'],
    ['Ð¾Ð±Ñ€Ð°Ð±Ð¾ï¿½ï¿½ÐºÐ°Ð¼Ð¸', 'Ð¾Ð±Ñ€Ð°Ð±Ð¾Ñ‚ÐºÐ°Ð¼Ð¸'],
    ['Ð¸Ð·Ð¼Ðµï¿½ï¿½ÐµÐ½Ð¸Ñ', 'Ð¸Ð·Ð¼ÐµÐ½ÐµÐ½Ð¸Ñ'],
    ['Ñ‡Ð°ÑÐ¾ï¿½ï¿½Ð¾Ð¹', 'Ñ‡Ð°ÑÐ¾Ð²Ð¾Ð¹'],
    ['ï¿½ï¿½Ð¸Ð¼Ð¸Ñ‚', 'Ð»Ð¸Ð¼Ð¸Ñ‚'],
    ['Ð»Ð¸ï¿½ï¿½Ð¸Ñ‚', 'Ð»Ð¸Ð¼Ð¸Ñ‚'],
    ['Ñ‚ÐµÑÑ‚Ð¸ï¿½ï¿½Ð¾Ð²Ð°Ð½Ð¸Ñ', 'Ñ‚ÐµÑÑ‚Ð¸Ñ€Ð¾Ð²Ð°Ð½Ð¸Ñ'],
    ['Ð¿Ðµï¿½ï¿½ÐµÐ·Ð°Ð¿ÑƒÑÑ‚Ð¸Ñ‚Ðµ', 'Ð¿ÐµÑ€ÐµÐ·Ð°Ð¿ÑƒÑÑ‚Ð¸Ñ‚Ðµ'],
    ['Ð¿Ñ€Ð¸Ð¼Ðµï¿½ï¿½ÐµÐ½Ð¸Ñ', 'Ð¿Ñ€Ð¸Ð¼ÐµÐ½ÐµÐ½Ð¸Ñ'],
    ['ÑƒÐ¿Ñ€Ð°ï¿½ï¿½Ð»ÐµÐ½Ð¸Ðµ', 'ÑƒÐ¿Ñ€Ð°Ð²Ð»ÐµÐ½Ð¸Ðµ'],
    ['Ð´ÐµÑ‚Ð°Ð»ÑŒï¿½ï¿½Ñ‹Ðµ', 'Ð´ÐµÑ‚Ð°Ð»ÑŒÐ½Ñ‹Ðµ'],
    ['Ð¾Ð±Ð½Ð¾ï¿½ï¿½Ð¸Ñ‚ÑŒ', 'Ð¾Ð±Ð½Ð¾Ð²Ð¸Ñ‚ÑŒ'],
    
    // Common emojis that were corrupted
    ['ï¿½ï¿½ï¿½', 'âœ…'],
    ['ï¿½ï¿½', 'ðŸ”™'],
    ['ï¿½ï¿½ï¿½', 'ðŸ”™'],
    ['ï¿½ï¿½ï¿½ï¿½', 'ðŸ“¤'],
    ['ï¿½ï¿½', 'ðŸ‘¤'],
    ['ï¿½ï¿½', 'ðŸ”„'],
    ['ï¿½ï¿½ï¿½ï¿½', 'ðŸ”„'],
    ['ï¿½ï¿½', 'ðŸ“‹'],
    ['ï¿½ï¿½', 'ðŸ '],
    ['ï¿½ï¿½ï¿½ï¿½', 'ðŸ '],
    ['ï¿½ï¿½', 'ðŸ‘¥'],
    ['ï¿½ï¿½ï¿½', 'ðŸ‘¥'],
    ['ï¿½ï¿½ï¿½ï¿½', 'ðŸ‘¥'],
    ['ï¿½ï¿½', 'ðŸ“Š'],
    ['ï¿½ï¿½ï¿½', 'ðŸ“Š'],
    ['ï¿½ï¿½ï¿½', 'ðŸ“‹'],
    ['ï¿½ï¿½', 'ðŸ“º'],
    ['ï¿½ï¿½', 'âš ï¸'],
    ['ï¿½ï¿½', 'ðŸŽ†'],
    ['ï¿½ï¿½', 'ðŸ”¶'],
    ['ï¿½ï¿½', 'ðŸ§ª'],
    ['ï¿½ï¿½', 'ðŸ“ˆ'],
    ['ï¿½ï¿½', 'ðŸŽ¯'],
    ['ï¿½ï¿½ï¿½', 'ðŸ¤–'],
    ['ï¿½ï¿½', 'ðŸ“…'],
    ['ï¿½ï¿½', 'â°'],
    ['ï¿½ï¿½', 'ðŸ’¡'],
    ['ï¿½ï¿½ï¿½', 'ðŸ”„'],
    ['ï¿½ï¿½', 'â–¶ï¸'],
    ['ï¿½ï¿½', 'â¹ï¸'],
    ['ï¿½ï¿½', 'ðŸ“Š'],
    ['ï¿½ï¿½', 'ðŸ—‘ï¸']
];

function fixEncodingInFile(filePath) {
    try {
        let content = fs.readFileSync(filePath, 'utf8');
        let changed = false;
        
        // Apply all encoding fixes
        for (const [corrupted, correct] of encodingFixes) {
            if (content.includes(corrupted)) {
                content = content.replace(new RegExp(corrupted, 'g'), correct);
                changed = true;
                console.log(`Fixed "${corrupted}" -> "${correct}" in ${filePath}`);
            }
        }
        
        if (changed) {
            fs.writeFileSync(filePath, content, 'utf8');
            console.log(`Updated ${filePath}`);
        } else {
            console.log(`No changes needed in ${filePath}`);
        }
        
        return changed;
    } catch (error) {
        console.error(`Error processing ${filePath}:`, error.message);
        return false;
    }
}

// List of files to fix
const filesToFix = [
    'index.js',
    'test-withdrawal-security.js',
    'restore-safe-limits.py',
    'BOT_ADMIN_RIGHTS_EXPLANATION.md',
    'NEW_LOTTERY_DESIGN.md',
    'CAPTCHA_IMPLEMENTATION_REPORT.md',
    'THROTTLING_QUICK_SUMMARY.md',
    'SETUP.md',
    'REFERRAL_LOTTERIES_REPORT.md',
    'REFERRAL_SECURITY_REPORT.md',
    'fix-queue-issues.py',
    'fix-agent-phone.py',
    'STARS_AGENT_GUIDE.md',
    'THROTTLING_FINAL_REPORT.md',
    'FILES_FOR_GIFTS.md',
    'subgram-api.js',
    'BOT_IMPROVEMENTS_PLAN.md',
    'IMPLEMENTATION_REPORT.md',
    'CHANGES_SUMMARY.md',
    'database.js'
];

console.log('Starting encoding fix process...');

let totalFilesChanged = 0;
for (const file of filesToFix) {
    if (fs.existsSync(file)) {
        if (fixEncodingInFile(file)) {
            totalFilesChanged++;
        }
    } else {
        console.log(`File not found: ${file}`);
    }
}

console.log(`\nEncoding fix completed! Changed ${totalFilesChanged} files.`);
